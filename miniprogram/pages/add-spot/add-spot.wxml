<!-- * æ–‡ä»¶å: add-spot.wxml
* æè¿°: æ·»åŠ æ™¯ç‚¹é¡µé¢å¸ƒå±€æ–‡ä»¶
* ç‰ˆæœ¬: 1.0.0
* åˆ›å»ºæ—¥æœŸ: 2025-05-25
* ä½œè€…: Tourism_Managementå¼€å‘å›¢é˜Ÿ
* 
* åŠŸèƒ½è¯´æ˜:
* - æ·»åŠ æ–°æ™¯ç‚¹çš„è¡¨å•ç•Œé¢
* - æ”¯æŒæ·±è‰²æ¨¡å¼å’Œä¸»é¢˜è‰²åŠ¨æ€åˆ‡æ¢
* - åŒ…å«æ‰€æœ‰æ™¯ç‚¹å­—æ®µçš„è¾“å…¥æ§ä»¶ -->
<view class="container {{isDarkMode ? 'dark-mode' : ''}}" data-theme="{{colorTheme}}" bindtap="hideAddressSuggestions">
	>
	<!-- è¡¨å•å®¹å™¨ -->
	<form class="add-spot-form {{isDarkMode ? 'dark-mode' : ''}}" bindsubmit="submitForm">
		<!-- åŸºæœ¬ä¿¡æ¯ç»„ -->
		<view class="form-group {{isDarkMode ? 'dark-mode' : ''}}">
			<view class="group-title {{isDarkMode ? 'dark-mode' : ''}}">åŸºæœ¬ä¿¡æ¯</view>
			<!-- æ™¯ç‚¹åç§° -->
			<view class="form-item {{isDarkMode ? 'dark-mode' : ''}}">
				<view class="label {{isDarkMode ? 'dark-mode' : ''}}">
					<text class="required">*</text>
					æ™¯ç‚¹åç§°
				</view>
				<input
				 class="input {{isDarkMode ? 'dark-mode' : ''}}"
				 placeholder="è¯·è¾“å…¥æ™¯ç‚¹åç§°"
				 value="{{formData.name}}"
				 data-field="name"
				 bindinput="onInputChange"
				 maxlength="100"
				/>
			</view>
			<!-- æ™¯ç‚¹æè¿° -->
			<view class="form-item {{isDarkMode ? 'dark-mode' : ''}}">
				<view class="label {{isDarkMode ? 'dark-mode' : ''}}">æ™¯ç‚¹æè¿°</view>
				<textarea
				 class="textarea {{isDarkMode ? 'dark-mode' : ''}}"
				 placeholder="è¯·è¾“å…¥æ™¯ç‚¹æè¿°"
				 value="{{formData.description}}"
				 data-field="description"
				 bindinput="onInputChange"
				 maxlength="100"
				 auto-height
				/>
				</view>
      <!-- çœä»½ -->
      <view class="form-item {{isDarkMode ? 'dark-mode' : ''}}">
        <view class="label {{isDarkMode ? 'dark-mode' : ''}}">çœä»½</view>
        <input class="input {{isDarkMode ? 'dark-mode' : ''}}" placeholder="è¯·è¾“å…¥çœä»½" value="{{formData.province}}" data-field="province" bindinput="onInputChange" maxlength="10" />
      </view>
      <!-- åˆ†ç±»ID -->
      <view class="form-item {{isDarkMode ? 'dark-mode' : ''}}">
        <view class="label {{isDarkMode ? 'dark-mode' : ''}}">åˆ†ç±»ID</view>
        <picker class="picker {{isDarkMode ? 'dark-mode' : ''}}" mode="selector" range="{{categoryOptions}}" range-key="label" value="{{categoryIndex}}" bindchange="onCategoryChange">
          <view class="picker-text {{isDarkMode ? 'dark-mode' : ''}}">
            {{categoryOptions[categoryIndex].label}}
          </view>
        </picker>
      </view>
    </view>
    <!-- ä½ç½®ä¿¡æ¯ç»„ -->
    <view class="form-group {{isDarkMode ? 'dark-mode' : ''}}">
      <view class="group-title {{isDarkMode ? 'dark-mode' : ''}}">ä½ç½®ä¿¡æ¯</view>
      <!-- æ™¯ç‚¹ä½ç½® -->
      <view class="form-item {{isDarkMode ? 'dark-mode' : ''}}">
        <view class="label {{isDarkMode ? 'dark-mode' : ''}}">
          <text class="required">*</text>
          æ™¯ç‚¹ä½ç½®
        </view>        <view class="location-container {{isDarkMode ? 'dark-mode' : ''}}">
          <input class="input location-input {{isDarkMode ? 'dark-mode' : ''}}" placeholder="è¯·è¾“å…¥è¯¦ç»†åœ°å€" value="{{formData.location.address}}" data-field="address" bindinput="onAddressInput" bindblur="onAddressBlur" confirm-type="search" bindconfirm="onAddressBlur" catchtap="stopPropagation" />
        </view>
        <!-- åœ°å€æœç´¢å»ºè®® -->
        <view wx:if="{{addressSuggestions.length > 0}}" class="address-suggestions {{isDarkMode ? 'dark-mode' : ''}}" catchtap="stopPropagation">
          <view wx:for="{{addressSuggestions}}" wx:key="place_id" class="suggestion-item {{isDarkMode ? 'dark-mode' : ''}}" bindtap="selectAddressSuggestion" data-suggestion="{{item}}">
            <text class="suggestion-text">{{item.description}}</text>
            <text class="suggestion-type">{{item.types[0]}}</text>
          </view>
        </view>
        <!-- åœ°å›¾ç»„ä»¶ -->
        <view class="map-container {{isDarkMode ? 'dark-mode' : ''}}">
          <map id="locationMap" class="location-map {{isDarkMode ? 'dark-mode' : ''}}" latitude="{{mapData.latitude}}" longitude="{{mapData.longitude}}" scale="{{mapData.scale}}" markers="{{mapData.markers}}" show-location="{{true}}" bindtap="onMapTap" bindregionchange="onMapRegionChange" bindmarkertap="onMarkerTap">
            <!-- åœ°å›¾ä¸­å¿ƒç‚¹æ ‡è®°ï¼ˆä½¿ç”¨ç®€å•çš„æ–‡å­—æ ‡è®°ï¼‰ -->
            <cover-view class="map-center-marker {{isDarkMode ? 'dark-mode' : ''}}">
              ğŸ“
            </cover-view>
          </map>
          <!-- åœ°å›¾æ“ä½œæŒ‰é’® -->
          <view class="map-controls {{isDarkMode ? 'dark-mode' : ''}}">
            <button class="map-control-btn {{isDarkMode ? 'dark-mode' : ''}}" bindtap="confirmMapLocation" type="default" size="mini">
              ç¡®è®¤ä½ç½®
            </button>
            <button class="map-control-btn secondary {{isDarkMode ? 'dark-mode' : ''}}" bindtap="searchNearbyPlaces" type="default" size="mini">
              é™„è¿‘æ™¯ç‚¹
            </button>
          </view>
        </view>
        <!-- ä½ç½®ä¿¡æ¯æ˜¾ç¤º -->
        <view wx:if="{{formData.location.address}}" class="address-info {{isDarkMode ? 'dark-mode' : ''}}">
          åœ°å€: {{formData.location.address}}
        </view>
        <view wx:if="{{formData.location.geopoint}}" class="coordinates {{isDarkMode ? 'dark-mode' : ''}}">
          ç»çº¬åº¦: {{formData.location.geopoint.coordinates[0]}}, {{formData.location.geopoint.coordinates[1]}}
        </view>
        <!-- åœ°å›¾ä½¿ç”¨æç¤º -->
        <view class="map-tip {{isDarkMode ? 'dark-mode' : ''}}">
          ğŸ’¡ æç¤ºï¼šç‚¹å‡»åœ°å›¾é€‰æ‹©ä½ç½®ï¼Œæˆ–ç›´æ¥è¾“å…¥åœ°å€è‡ªåŠ¨å®šä½
        </view>
      </view>
    </view>
    <!-- ä»·æ ¼ä¸è¯„åˆ†ç»„ -->
    <view class="form-group {{isDarkMode ? 'dark-mode' : ''}}">
      <view class="group-title {{isDarkMode ? 'dark-mode' : ''}}">ä»·æ ¼ä¸è¯„åˆ†</view>
      <!-- é—¨ç¥¨ä»·æ ¼ -->
      <view class="form-item {{isDarkMode ? 'dark-mode' : ''}}">
        <view class="label {{isDarkMode ? 'dark-mode' : ''}}">é—¨ç¥¨ä»·æ ¼ï¼ˆå…ƒï¼‰</view>
        <input class="input {{isDarkMode ? 'dark-mode' : ''}}" placeholder="è¯·è¾“å…¥é—¨ç¥¨ä»·æ ¼" value="{{formData.price}}" data-field="price" bindinput="onInputChange" type="number" />
      </view>
      <!-- è¯„åˆ† -->
      <view class="form-item {{isDarkMode ? 'dark-mode' : ''}}">
        <view class="label {{isDarkMode ? 'dark-mode' : ''}}">è¯„åˆ†ï¼ˆ0-5åˆ†ï¼‰</view>
        <slider class="slider {{isDarkMode ? 'dark-mode' : ''}}" min="0" max="5" step="0.1" value="{{formData.rating}}" show-value bindchange="onRatingChange" />
      </view>
    </view>
    <!-- æ—¶é—´ä¿¡æ¯ç»„ -->
    <view class="form-group {{isDarkMode ? 'dark-mode' : ''}}">
      <view class="group-title {{isDarkMode ? 'dark-mode' : ''}}">æ—¶é—´ä¿¡æ¯</view>
      <!-- å¼€æ”¾æ—¶é—´ -->
      <view class="form-item {{isDarkMode ? 'dark-mode' : ''}}">
        <view class="label {{isDarkMode ? 'dark-mode' : ''}}">å¼€æ”¾æ—¶é—´</view>
        <picker class="picker {{isDarkMode ? 'dark-mode' : ''}}" mode="time" value="{{openingTimeStr}}" bindchange="onOpeningTimeChange">
          <view class="picker-text {{isDarkMode ? 'dark-mode' : ''}}">
            {{openingTimeStr || 'è¯·é€‰æ‹©å¼€æ”¾æ—¶é—´'}}
          </view>
        </picker>
      </view>
      <!-- å…³é—­æ—¶é—´ -->
      <view class="form-item {{isDarkMode ? 'dark-mode' : ''}}">
        <view class="label {{isDarkMode ? 'dark-mode' : ''}}">å…³é—­æ—¶é—´</view>
        <picker class="picker {{isDarkMode ? 'dark-mode' : ''}}" mode="time" value="{{closingTimeStr}}" bindchange="onClosingTimeChange">
          <view class="picker-text {{isDarkMode ? 'dark-mode' : ''}}">
            {{closingTimeStr || 'è¯·é€‰æ‹©å…³é—­æ—¶é—´'}}
          </view>
        </picker>
      </view>
      <!-- æœ€ä½³æ—…æ¸¸å­£èŠ‚ -->
      <view class="form-item {{isDarkMode ? 'dark-mode' : ''}}">
        <view class="label {{isDarkMode ? 'dark-mode' : ''}}">æœ€ä½³æ—…æ¸¸å­£èŠ‚</view>
        <picker class="picker {{isDarkMode ? 'dark-mode' : ''}}" mode="selector" range="{{seasonOptions}}" value="{{formData.best_season}}" bindchange="onSeasonChange">
          <view class="picker-text {{isDarkMode ? 'dark-mode' : ''}}">
            {{seasonOptions[formData.best_season]}}
          </view>
        </picker>
      </view>
    </view>
    <!-- è”ç³»ä¿¡æ¯ç»„ -->
    <view class="form-group {{isDarkMode ? 'dark-mode' : ''}}">
      <view class="group-title {{isDarkMode ? 'dark-mode' : ''}}">è”ç³»ä¿¡æ¯</view>
      <!-- è”ç³»ç”µè¯ -->
      <view class="form-item {{isDarkMode ? 'dark-mode' : ''}}">
        <view class="label {{isDarkMode ? 'dark-mode' : ''}}">è”ç³»ç”µè¯</view>
        <input class="input {{isDarkMode ? 'dark-mode' : ''}}" placeholder="è¯·è¾“å…¥è”ç³»ç”µè¯" value="{{formData.phone}}" data-field="phone" bindinput="onInputChange" type="number" maxlength="100" />
      </view>
      <!-- å®˜æ–¹ç½‘ç«™ -->
      <view class="form-item {{isDarkMode ? 'dark-mode' : ''}}">
        <view class="label {{isDarkMode ? 'dark-mode' : ''}}">å®˜æ–¹ç½‘ç«™</view>
        <input class="input {{isDarkMode ? 'dark-mode' : ''}}" placeholder="è¯·è¾“å…¥å®˜æ–¹ç½‘ç«™URL" value="{{formData.website}}" data-field="website" bindinput="onInputChange" maxlength="100" />
      </view>
    </view>
    <!-- çŠ¶æ€è®¾ç½®ç»„ -->
    <view class="form-group {{isDarkMode ? 'dark-mode' : ''}}">
      <view class="group-title {{isDarkMode ? 'dark-mode' : ''}}">çŠ¶æ€è®¾ç½®</view>
      <!-- çŠ¶æ€å¼€å…³ -->
      <view class="form-item {{isDarkMode ? 'dark-mode' : ''}}">
        <view class="label {{isDarkMode ? 'dark-mode' : ''}}">æ™¯ç‚¹çŠ¶æ€</view>
        <switch class="switch {{isDarkMode ? 'dark-mode' : ''}}" checked="{{formData.status}}" bindchange="onStatusChange" />
        <text class="status-text {{isDarkMode ? 'dark-mode' : ''}}">
          {{formData.status ? 'æ­£å¸¸è¥ä¸š' : 'æš‚åœè¥ä¸š'}}
        </text>
      </view>
    </view>
    <!-- æäº¤æŒ‰é’® -->
    <view class="submit-container {{isDarkMode ? 'dark-mode' : ''}}">
      <button class="submit-btn {{isDarkMode ? 'dark-mode' : ''}}" form-type="submit" disabled="{{submitting}}">
        {{submitting ? 'æäº¤ä¸­...' : 'æ·»åŠ æ™¯ç‚¹'}}
      </button>
    </view>
  </form>
  <!-- åº•éƒ¨å®‰å…¨åŒº -->
  <view class="safe-bottom" />
</view>

