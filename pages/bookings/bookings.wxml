<!-- pages/bookings/bookings.wxml -->
<view class="container {{isDarkMode ? 'dark-mode' : ''}} {{themeClass}}">
		<view class="page-header {{isDarkMode ? 'dark-mode' : ''}}">
				<view class="page-title {{isDarkMode ? 'dark-mode' : ''}}">æˆ‘çš„é¢„è®¢</view>
				<view class="count-badge {{isDarkMode ? 'dark-mode' : ''}}">å…±{{bookings.length}}ä¸ª</view>
		</view>
		<view class="bookings-list {{isDarkMode ? 'dark-mode' : ''}}" wx:if="{{bookings.length > 0}}">
				<view wx:for="{{bookings}}" wx:key="id" class="booking-card {{isDarkMode ? 'dark-mode' : ''}}">
						<!-- è®¢å•ä¿¡æ¯é¡¶éƒ¨ -->
						<view class="booking-top {{isDarkMode ? 'dark-mode' : ''}}">
								<view class="booking-id {{isDarkMode ? 'dark-mode' : ''}}">è®¢å•å·: {{item.id}}</view>
								<view class="booking-status {{item.status === 'å·²ä½¿ç”¨' ? 'used' : ''}} {{isDarkMode ? 'dark-mode' : ''}}">
										{{item.status}}
								</view>
						</view>
						<!-- ä½¿ç”¨spot-cardç»„ä»¶æ˜¾ç¤ºæ™¯ç‚¹ä¿¡æ¯ -->
						<view wx:if="{{item.spotInfo}}" class="{{isDarkMode ? 'dark-mode' : ''}}">
								<spot-card spot="{{item.spotInfo}}" isDarkMode="{{isDarkMode}}" bindtap="goToDetail" data-id="{{item.spotId}}" />
						</view>
						<!-- æ²¡æœ‰spot-cardæ•°æ®æ—¶çš„å¤‡ç”¨æ˜¾ç¤º -->
						<view wx:else class="booking-content {{isDarkMode ? 'dark-mode' : ''}}" bindtap="goToDetail" data-id="{{item.spotId}}">
								<view class="booking-spot {{isDarkMode ? 'dark-mode' : ''}}">{{item.spotName}}</view>
								<view class="booking-info {{isDarkMode ? 'dark-mode' : ''}}">
										<view class="booking-date {{isDarkMode ? 'dark-mode' : ''}}">
												<text class="info-icon {{isDarkMode ? 'dark-mode' : ''}}">ğŸ“…</text>
												<text class="{{isDarkMode ? 'dark-mode' : ''}}">æ—¥æœŸ: {{item.date}}</text>
										</view>
										<view class="booking-price {{isDarkMode ? 'dark-mode' : ''}}">
												<text wx:if="{{item.price > 0}}" class="{{isDarkMode ? 'dark-mode' : ''}}">
														Â¥{{item.price}}
												</text>
												<text wx:else class="{{isDarkMode ? 'dark-mode' : ''}}">å…è´¹</text>
										</view>
								</view>
						</view>
						<!-- è®¢å•æ“ä½œæŒ‰é’® -->
						<view class="booking-actions {{isDarkMode ? 'dark-mode' : ''}}">
								<view class="action-btn primary {{isDarkMode ? 'dark-mode' : ''}}" wx:if="{{item.status !== 'å·²ä½¿ç”¨'}}" catchtap="useBooking" data-index="{{index}}">
										ä½¿ç”¨
								</view>
								<view class="action-btn secondary {{isDarkMode ? 'dark-mode' : ''}}" catchtap="cancelBooking" data-index="{{index}}">
										å–æ¶ˆ
								</view>
						</view>
				</view>
		</view>
		<view class="empty-view {{isDarkMode ? 'dark-mode' : ''}}" wx:else>
				<image class="empty-icon" src="/images/empty-bookings.png" mode="aspectFit" />
				<view class="empty-text {{isDarkMode ? 'dark-mode' : ''}}">æš‚æ— é¢„è®¢è®°å½•</view>
				<view class="empty-tips {{isDarkMode ? 'dark-mode' : ''}}">æ‚¨å¯ä»¥åœ¨æ™¯ç‚¹è¯¦æƒ…é¡µè¿›è¡Œé¢„è®¢</view>
				<button class="action-btn {{isDarkMode ? 'dark-mode' : ''}}" bindtap="goToHome">å»é¦–é¡µçœ‹çœ‹</button>
		</view>
</view>
<!-- åœ¨pageæ ¹å…ƒç´ ä¸Šè®¾ç½®ä¸»é¢˜å±æ€§ -->
<wxs module="themeHelper">
	module.exports = {
	setTheme: function() {
	var pages = getCurrentPages();
	var page = pages[pages.length - 1];
	if (page) {
	page.setData({
	pageTheme: getApp().globalData.colorTheme
	});
	}
	}
	}
</wxs>